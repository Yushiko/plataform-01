<div class="row" id="allCourses">
    <div class="col-md-12 mx-auto">
        <div class="card text-center">
            {{> messages}}
            <div class="card-header">

                <div class="col-sm">
                    <a class="btn btn-primary float-left regresarUnits" style="width: 5%;" data-value={{courseID}}><i
                            class="fas fa-arrow-left" aria-hidden="true"></i></a>
                </div>
                <div class="col-sm">
                    <h3 class="col-sm text-center" style="position: absolute;">Temas</h3>
                </div>
                <div class="col-sm">
                    <h3 class="col-sm text-right">Curso: {{courName}}</h3>
                    <h3 class="col-sm text-right">Unidad: {{unitName}}</h3>
                </div>

            </div>
            <div class="card-body">
                <div class="row  justify-content-start">

                    <div class="col-sm">
                        Busqueda
                        <input type="text" style="width: 70%;" id="searchCourse" placeholder="">
                    </div>
                    <div class="col-md">
                        <button type='button' data-toggle='modal' data-target='#newUser'
                            class="btn btn-success float-right" style="position: absolute; top: 20%; left: 70%">Nuevo
                            Tema</button>


                        <!-- cuadro del modal AGREGAR-->
                        <div class="modal fade" id="newUser" tabindex="-1" role="dialog">
                            <div class="modal-dialog" role="document">

                                <form id="nuevo_tema">
                                    <div class="modal-content">
                                        <div class="modal-header d-block" style="background-color: #00447f; color: white">
                                            <h5 class="modal-title text-center">
                                                Nuevo Tema
                                            </h5>
                                        </div>
                                        <div class="modal-body" style="text-align: start;">

                                            <div class="form-group">
                                                <label for="inputName">Titulo del tema</label>
                                                <div class="input-group">
                                                    <input type="text" name="topictitle" id="inputName"
                                                        class="form-control" />
                                                </div>
                                            </div>


                                            <div class="form-group">
                                                <label for="inputCate">Numero del tema</label>
                                                <div class="input-group">
                                                    <input type="number" name="topicnum" />
                                                </div>
                                            </div>


                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary"
                                                data-dismiss="modal">Cancelar</button>
                                            <button class="btn btn-primary nuevoTemaBoton"
                                                value="{{unitID}}">Aceptar</button>
                                        </div>
                                    </div>
                                </form>

                            </div>
                        </div>





                    </div>

                </div>
            </div>
            <table class="table  table-striped  table-hover" id="tableCourses">
                <thead>
                    <tr>
                        <th style="width:10%; background-color: #5DACCD; color:#fff" scope="col">Numero del tema</th>
                        <th style="background-color: #5DACCD; color:#fff" scope="col">Titulo</th>
                        <th style="background-color: #5DACCD; color:#fff" scope="col">Tipo de actividad</th>
                        <th style="background-color: #5DACCD; color:#fff" scope="col">Fecha de creacion</th>
                        <th style="background-color: #5DACCD; color:#fff" scope="col">Acciones</th>
                    </tr>
                </thead>
                <tbody id="allTopics">
                    {{#each topics}}
                    <tr>
                        <th scope="row">{{topicnum}}</th>
                        <td>{{topictitle}}</td>
                        <td>Ninguna</td>
                        <td>{{timeago createtopic}}</td>
                        <td>
                            <button type="button" class="btn"
                                style="background-color:#1b9e1d;border: 0px !important;color:white;" title="Detalles">
                                <i class="far fa-eye" aria-hidden="true"></i>
                            </button>
                            <button type="button" class="btn" data-toggle='modal' data-target='#{{id}}'
                                style="background-color:#5172F3;border: 0px !important;color:white;"
                                title="Editar Tema">
                                <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
                            </button>
                            <button type="button" class="btn" data-toggle='modal' data-target='#Del{{id}}'
                                style="background-color: red;border: 0px !important;color:white;" title="Eliminar Tema">
                                <i class="fas fa-trash-alt" aria-hidden="true"></i>
                            </button>


                            {{#ifCond ../existTempl '>' 0}}

                            <button type="button" class="btn templateButton" data-value='{{id}}'
                                style="background-color:rgb(7, 206, 130);border: 0px !important;color:white;"
                                title="Plantilla">
                                <i class="far fa-newspaper" aria-hidden="true"></i>
                            </button>

                            {{/ifCond}}

                            {{#ifCond ../existTempl '==' null}}

                            <button type="button" class="btn" data-toggle='modal' data-target='#Temp{{id}}'
                                style="background-color:rgb(226, 19, 174);border: 0px !important;color:white;"
                                title="Agregar Plantilla">
                                <i class="far fa-newspaper" aria-hidden="true"></i>
                            </button>
                            <a>{{../existTempl}}</a>

                            <!-- modal agregar plantilla-->
                            <div class="modal fade" id="Temp{{id}}" tabindex="-1" role="dialog">
                                <div class="modal-dialog" role="document">

                                    <form id="nueva_plantilla">
                                        <div class="modal-content">
                                            <div class="modal-header d-block" style="background-color: #00447f; color: white">
                                                <h5 class="modal-title text-center">
                                                    Nueva Plantilla
                                                </h5>
                                            </div>
                                            <div class="modal-body" style="text-align: start;">


                                                <div class="form-group">
                                                    <label>Tipo de plantilla</label>
                                                    <div class="input-group">
                                                        <select name="typetemp" class="form-control">
                                                            <option value="1">Tipo Alfabeto</option>
                                                            <option value="2">Otro..</option>
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <label>Vista previa</label>
                                                    <div class="card border-dark vistaPrevia" style="height: 10rem">

                                                    </div>
                                                </div>


                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary"
                                                    data-dismiss="modal">Cancelar</button>
                                                <button class="btn btn-primary nuevaPlantillaBoton" value="{{id}}"
                                                    data-unit="{{../unitID}}">Aceptar</button>
                                            </div>
                                        </div>
                                    </form>

                                </div>
                            </div>
                            {{/ifCond}}





                            <!-- cuadro del modal ELIMINAR -->
                            <div class="modal fade" id="Del{{id}}" tabindex="-1" role="dialog">
                                <div class="modal-dialog" role="document">
                                    <form action="/administrador/delTopic/{{id}}" method="post">
                                        <div class="modal-content">
                                            <div class="modal-header d-block" style="background-color: #00447f; color: white">
                                                <h5 class="modal-title text-center">
                                                    ELIMINAR TEMA {{topictitle}}
                                                </h5>
                                            </div>
                                            <div class="modal-body" style="text-align: start;">
                                                <div class='col-lg-12' style="color: black;">
                                                    <div class="alert alert-success alert-dismissible fade show"
                                                        role="alert">
                                                        <h4>Detalles del tema</h4>
                                                        <br>
                                                        <h5>Titulo: {{topictitle}}</h5>

                                                    </div>
                                                </div>
                                                <h5>LA ACCION NO SE PODRA REVERTIR</h5>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary"
                                                    data-dismiss="modal">Cancelar</button>
                                                <button type="submit" class="btn btn-danger">ELIMINAR</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>


                            <!-- cuadro del modal EDITAR -->
                            <div class="modal fade" id={{id}} tabindex="-1" role="dialog">
                                <div class="modal-dialog" role="document">
                                    <form class="modificar_tema">
                                        <div class="modal-content">
                                            <div class="modal-header d-block" style="background-color: #00447f; color: white">
                                                <h5 class="modal-title text-center">
                                                    Editar Tema
                                                </h5>
                                            </div>
                                            <div class="modal-body" style="text-align: start;">

                                                <div class="form-group">
                                                    <label for="inputName">Titulo del tema</label>
                                                    <div class="input-group">
                                                        <textarea name="topictitle" cols="64" id="inputName" rows="1"
                                                            class="form-control">{{topictitle}}</textarea>
                                                    </div>
                                                </div>


                                                <div class="form-group">
                                                    <label for="inputCate">Numero del tema</label>
                                                    <div class="input-group">
                                                        <input type="number" value="{{topicnum}}" name="topicnum" />
                                                    </div>
                                                </div>

                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-secondary"
                                                    data-dismiss="modal">Cancelar</button>
                                                <button class="btn btn-primary modificarTopicBoton" value="{{id}}"
                                                    data-unit="{{../unitID}}">Aceptar</button>
                                            </div>
                                        </div>
                                    </form>
                                </div>
                            </div>


                        </td>
                    </tr>
                    {{else}}
                    <h4>NO SE ENCUENTRA NINGUN TEMA REGISTRADO</h4>
                    {{/each}}

                </tbody>

            </table>
        </div>
    </div>

</div>
<script src="/scripts/subcategorys.js" charset="utf-8"></script>
<script src="/scripts/functionsAdmin.js" charset="utf-8"></script>
<script src="/scripts/templates.js" charset="utf-8"></script>